<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="../styles.css">
</head>
<body>
    <div id="application">
        <blockquote>
            <p>
                Problem is (follow me closely here, the science is pretty complicated),
                if I cut a hole in the Hab, the air won't stay inside anymore.
            </p>
            <footer>&mdash; Andy Weir, <i>The Martian</i></footer>
        </blockquote>
    </div>

    <script type="text/javascript">
    ;(function() {
        const $APPLICATION = document.getElementById('application')


        // Model. Attributes to persist data or state
        // that the application uses
        const model = { }

        model.present = function(data) {
            state._render(model)
        }


        // Partials. Optionally used by views to keep
        // views shorter and DRY
        const partial = { }

        partial.example = function(model) {
            return (
                '<blockquote>' +
                    '<p>' +
                        'Problem is (follow me closely here, the science is pretty complicated), ' +
                        'if I cut a hole in the Hab, the air won&rsquo;t stay inside anymore.' +
                    '</p>' +
                    '<footer>&mdash; Andy Weir, <i>The Martian</i></footer>' +
                '</blockquote>'
            )
        }


        // Views. Full application control over the presentation
        // of the Model and State
        const view = { }

        view._display = function(representation) {
            $APPLICATION.innerHTML = representation
        }

        view.example = function(model) {
            return (
                partial.example(model)
            )
        }


        // States. Interpretations of the model indicating
        // a current state of the application
        const state = { }

        // Next action predicate, decides whether the system is
        // in a (control) state where an action needs to be invoked
        state._next = function(model) {
            // Pass
        }

        state._render = function(model) {
            state._representation(model)
            state._next(model)
        }

        // Derive the state representation as a function of the system
        // control state
        state._representation = function(model) {
            var representation = 'Oops... something went wrong!'

            if (state.example(model)) representation = view.example(model)

            view._display(representation)
        }

        state.example = function(model) {
            return ( true )
        }


        // Actions. Initiated by a control state or by
        // a user event
        const actions = window.actions = { }

        action.example = function(data) {
            model.present(data)
        }


        // Initialize
        model.present()
    })()
    </script>
</body>
</html> 
